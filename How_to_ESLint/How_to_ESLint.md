**ESLintとは？**

- Topics
    - コーディング規約
    - リンター
    - コンパイラー
    - リンターとコンパイラー
    - ESLint

- 前提知識
    - 高水準言語の特徴
        - プログラミング言語(高水準言語)は文法が決まっており、文法に沿って記述をする事でコンパイルなどが実行可能になっている
    - 文法を守ったプログラム
        - 文法を守ったプログラムであれば誰が書いても一致するか？というとそうならない
            - 文字列の記述においても、シングルクウォーテーション、ダブルクウォーテーション、文字列リテラルなどの書き方がある
                - しかし、書き方は違えど実行結果は同じとなる事が多々存在する
    - 文法内での記述方法の揺れについて
        - 記載方法の違いによってプログラムが読みづらくなる事がある
            - コードの本質ではない部分で理解に対してコストがかかっている
    - コーディング規約という概念
        - プログラムを記載するルールを決めたものをコーディング規約(coding standards)と呼ぶ
            
            例：変数はキャメルケースで記述する　　など、、、
        
        - コーディング規約は1から作成するのは重大なコストのためネットに公開されている規約を使用する事が推奨される
    - コーディング規約運用の実際
        - コストがかなりかかる
            - 規約通りではないプログラムが生まれる背景
                - 意図せずにやってしまう
                - 規約を知った上で破る場合
            - ヒューマンエラーは確実に起こってしまうため日々、コーディング規約に沿っているのか？チェックする事が必要になる
        - 心理的な負担
            - 規約によって正しいプログラムと正しくないプログラムが決定されてしまう
                - 正しくないコードがあった場合に指摘する側の心理的な負担が強くなってしまう
                    - 相手との対人関係なども含まれる
    - コーディング規約の自動化
        - このようにコーディング規約を運用する事はコストがかかる反面、メリットもある
            - 人的なコストがかかってしまうという事をコーディング規約の自動化をESLintなどを使って実行する

    - ESLint
        - コマンド1つでプログラムがコーディング規約に則っているかチェックし自動修正可能なものに関しては自動修正を実行してくれるツール

    - リンター
        - 静的にプログラムを解析してバグ、問題点を発見するツール
            - リンターを使ってブログラムを解析する事をリントすると呼ぶ
        - コンパイラーとリンター
            - どちらもプログラムを解析するが、コンパイラーはある言語から別の言語に変換する事が目的
            - リンターはプログラムの問題点を指摘する事となる
                - どちらにも類似した機能はあるが、あくまで補助的な機能であり本質的な機能ではない
                    - 被っている機能としては構文チェックの領域において被る

- JavaScriptのプログラムをESLintを使ってリントする
    - プロジェクトルートにpackge.jsonを作成する
        - 内容は使用したいESLintを使用するディレクトリ名やライセンス情報などを記述する
    - ESLintの導入
        - ESLintはYarnでインストールする事ができる
            - -Dオプションを使う事で開発時のみに使う設定とする事ができる
                - バージョン確認
                    - npm eslint -v とする事で確認可能
                        - npmコマンドは実行するとNodeモジュールを呼び出す事ができる
        - ESLintの設定ファイルを作成する
            - プロジェクトのルートにeslintrc.jsを作成する
                - root
                - env
                - parserOptions
                    - ecmaVersion
                    - sourceType
        - ESLintのルールを設定する
            - ルールがESLintにおいて最小単位となる
                - 200を超えるルールが存在する
            - 重大度
                - 0~2の3種類で分類される
                    - off
                    - warm
                    - error
        - ESLintにおいてルールeslintrc.js内でruleフィールド内に追加して記載していく
            - console.logの禁止
                -  "no-console": "error",
            - 変数名をキャメルケースに、プロパティにおいては適用外
                - camelcase: ["error", { properties: "never" }],
        - 作成したESLintのルールに則りJSをリントする
            - テスト用のJSファイルを作成する
                - 内容：export const hello_world = "Hello World";
                       
                       console.log(hello_world);
            - npx eslint src　コマンドを実行する
                - srcディレクトリの内部のファイル全てをリントしてくれる
                    - エラーが存在する場合にはターミナルにそのままエラー内容が表示される
                        - 表示エラーの内容：行or列番号 重大度 問題点の説明 ルール名
                - エラーに対して適切に対処する事でコマンドを実行してもエラー表示がなくなる
                    - エラー内容が不明な場合には公式ドキュメントを確認する事が勧められる
                        - https://eslint.org/docs/rules/no-console
        - 自動修正機能を使う
            - 自動修正機能がESLintには備わっている
                - 対象のエラーに対しては自動で修正まで行ってくれる
                    - コマンドを実行する際に --fix　コマンドを実行する事で自動修正まで行ってくれる
        - sharableconfig
            - ESLintの設定を誰でも使えるように共有されているプリセットが存在する
                - 文章としてのコーディング規約と共に共有されている場合もあり有用な事が多い
                    - eslint-config-airbnb
                    - eslint-config-airbnb-base etc...
                        - Yarnでインストールを実行する
            - ESLintの設定ファイルでextendsとしてインストールしたモジュールを指定する
                - ルールを追加や上書きしたい場合にはextendsの後にrulesとしてルールを記載する
        - ESLintをエスケープする方法
            - エスケープさせたいコードがある場合にはコメントをコードの前に記述する事で短縮する事ができる

- TypeScriptのプログラムをリントする
    - ESLintはTypeSritptをフォローしていない
        - リントするためにはTypeScript ESLintが必要になってくる
    - プロジェクトルートにpackge.jsonを作成する
        - ESLint同様に対象にしたいディレクトリ等を記述する
    - TSコンパイラの設定ファイルを作成する
    - 必要なパッケージをインストールする
        - ESLint parser+ESLint plugin
            - それぞれ、TSの構文を理解させる、TS向けのルールを追加するなどの役割を持っている
                - 100以上のルールが追加されるようになる
    - shareable configを導入する
        - eslint-config-airbnb-typescript
            - ルールの追加や除外
        - eslint-plugin-import
            - 依存関係
    - 設定ファイルをプロジェクトのルートに作成する
        - tsconfig.eslint.json
        - .eslintrc.js
            - この2つが必要になる
        - tsconfig.eslint.json
            - 型情報をチェック時に追加するためのコンパイラ設定を記述するファイル
                -  "extends"でtsconfig.jsonの情報を継承＋追加情報を上書きする
        - .eslintrc.js
            - ESLintの設定ファイル
                - parser
                    - パーサーを設定する事でJSやTSの構文を解析する
                - plugins
                    - 公式の設定しているルール以外のルールがプラグインという形で公開されている
                        - 追加で使用するプラグインを記載する
                - parserOptions
                    - 型情報を参照する際に必要になる情報を示す
                        - project
                            - コンパイラ設定ファイルをtsconfigRootDirからの相対パスで示す
                        - tsconfigRootDir
                            - プロジェクトルートの絶対パス
                - ignorePatterns
                    - チェックの対象外にするファイルやディレクトリを指定する
                        - TypeScriptのプロジェクトであれば、JavaScriptにコンパイルした後のファイルにはリントする必要がなくなる
                - extends
                    - shareable configを使うためのもの
                        - 記載する順番を正しくしないと動作しないものがあるため注意が必要
                - rules
                    - shareable configに対してさらに上書きをしたい場合に記載する
                        - TypeScript ESLintで追加されたルールの接頭辞＝＞@typescript-eslint/となる

- VSCodeとESLintを統合する
    - ESLintはそのままでもコマンド1つでコードをリントする事ができる便利なツール
        - しかし、エディターと統合し使う事でリアルタイムに問題点を指摘してくれるようになりさらに便利になる
            - 拡張機能からESLintをインストールするのみで使用可能になる