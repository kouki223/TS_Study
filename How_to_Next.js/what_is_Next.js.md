**Next.jsとは？**

- Next.jsとは？
    - Vercel社が開発を推進しているReactをベースにモダンなアプリケーション開発に必要な機能が追加されたフレームワーク
- 特徴的な機能
    - ルーティング
        - ディレクトリ構成、ファイル名が所定のものになっているため自動的にルーティングされる
    - パフォーマンスの最適化
        - サーバー側で事前にページを生成して初期表示に優れる
            - 画像の最適化、コード分割も自動で行なってくれる
    - CSSフレームワーク
        - Tailwind CSS
        - CSS Modeleなどのスタイリングをサポートする
    - バンドラー
        - 内部でWebpackやBabelなどの設定を行なってくれるため設定を気にする必要がない
    - サーバーサイドの動きもできる
        - DB,APIとの通信もNext.jsで可能
    - デプロイ環境
        - Vercel社が開発を推進している関係でVercelというホスティングサービスが提供されている
            - デプロイが簡単にできるという利点がある

**猫画像ジェネレーターを作成する**

- 必要な知識
    - Next.jsの新規プロジェクトの作成
    - App Routerの使い方
    - サーバーコンポーネントとクライアントコンポーネント
    - サーバーアクションの使い方
    - 外部API連携
    - 機密情報となる資格情報(APIキー)の取り扱い

- ページコンポーネント
    - Next.jsにおいてappディレクトリ配下の構造がルーティングに対応する事になる
        - 今回は、app/page.tsxが/にアクセスした時にルーティングされるようになる
            - このapp/page.tsxのようなページの事をページコンポーネントと呼ぶ
    - Next.jsにおいては自動的にルーティングされるようになる

- ルートファイル
    - ルートファイルとは、該当のプロジェクト内で最上段のディレクトリを指す

- 外部との通信を行う
    - 猫のランダム画像を取得する
        - Cat APIというAPIを使って猫画像を取得する
            - 各API毎に決まったルールが存在する
                - API毎にAPIを叩いたレスポンスとしてどのようなデータが返ってくるのか確認する事が重要
                    - Cat APIの場合には配列形式でレスポンスが返ってくる

- fetch関数
    - ブラウザ標準のHTTPリクエストを行いリソースを取得するAPI
        - 戻り値としてresponseオブジェクトを返す
            - 戻り値は様々な形をしているため.jsonを使ってJSオブジェクトとして慣らす

- 非同期処理
    - asyncとawit
        - JavaScript,TyopeScriptにおいて処理はマルチスレッドではなく並列処理として順不同に行われる。
            - Stateの更新をする場合や、データの再取得などを行う場合には非同期処理として順番に処理を実行していく事が必要になる
                - 非同期処理を実行したい関数には関数の前にasyncキーワードをつける事で非同期処理を実行できるようになる
                    - 処理の終了まで待ちたい処理の前にはawitをつける事で処理の実行を待つ事ができる

- 関数を呼び出すタイミング
    - await connection()キーワードを準備しないSSG(静的サイト作成)
        - SSGにおいて関数が実行されるタイミングはビルド時になる
            - 今回のCatAPIを叩くアプリケーションにおいては、ビルド時にAPIを叩いてしまうとビルド時の画像が読み込まれてビルドされてしまう関係で画像が変わらなくなってしまう
    - await connection()キーワードを使ったSSG
        - await connection()キーワードを使う事でビルド時に関数が実行されなくなり、ブラウザをリロードした時に関数が呼び出されるようになる
            - ビルドしていない開発モードにおいてはキーワードがない状態でもリロードで更新されるようになる

- TypeScriptの有利な部分(関数のも戻り値に型を適用する)
    - Typeとして型を追加する事ができる(型注釈など)
        - 型を追加する事でバグが発生する可能性をコーディング段階で防ぐ事ができる
            - 特にAPIレスポンスにおいてはバグが発生しやすくなる
    - 厳格なレスポンスのチェック
        - より厳格にレスポンスデータのチェックを行う事ができる
            - any型を防ぐ
            - 型ガード
                - TSにおけるテクニックを活用する事でコーディング段階では工程が多くかかる場合でも保守、点検、運用の段階でコストをカットする事が可能になる
                    - バランスを見極める事が重要になる